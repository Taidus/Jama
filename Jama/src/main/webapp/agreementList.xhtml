<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head></h:head>
<h:body>

	<h:form>
		<input type="hidden" name="cid"
				value='#{agreementListPB.conversation.id}' />

		<p:dataTable id="agreementTable" var="agr"
			value="#{agreementListPB.allAgreements}" widgetVar="w_agrTable"
			emptyMessage="#{msgs.noAgrFound}"
			filteredValue="#{agreementListPB.filteredValues}">

			<f:facet name="header">
				<p:outputPanel>
					<h:outputText value="#{msgs.search}:" />
					<p:inputText id="globalFilter" onkeyup="w_agrTable.filter()"
						style="width:150px" />
				</p:outputPanel>
			</f:facet>

			<p:column id="chiefColumn" filterBy="#{agr.chief.completeName}"
				headerText="#{msgs.chief}" filterMatchMode="contains">
				<h:outputText value="#{agr.chief.completeName}" />
			</p:column>

			<p:column id="companyColumn" filterBy="#{agr.company.name}"
				headerText="#{msgs.company}" filterMatchMode="contains">
				<h:outputText value="#{agr.company.name}" />
			</p:column>

			<p:column id="dateColumn">
				<f:facet name="header">
	                	#{msgs.approvalDate}  
					    <div style="display: block; width: 90%; margin: auto;">
						<p:calendar id="firstDate" styleClass="calendarFilter"
							value="#{agreementListPB.filterMinDate}" pattern="dd/MM/yyyy"
							readonlyInput="true" showOn="both" showOtherMonths="true">
							<p:ajax event="dateSelect"
								listener="#{agreementListPB.filterByDate()}"
								update="agreementTable" />
						</p:calendar>
						-
						<p:calendar id="lastDate" styleClass="calendarFilter"
							value="#{agreementListPB.filterMaxDate}" pattern="dd/MM/yyyy"
							readonlyInput="true" showOn="both" showOtherMonths="true">
							<p:ajax event="dateSelect"
								listener="#{agreementListPB.filterByDate()}"
								update="agreementTable" />
						</p:calendar>
					</div>
				</f:facet>
				
				<h:outputText value="#{agr.approvalDate}" />
			</p:column>

		</p:dataTable>

	</h:form>
	
	<h:commandButton action="#{agreementListPB.backToHome()}" value="Home" immediate="true"/> 
</h:body>
</html>
