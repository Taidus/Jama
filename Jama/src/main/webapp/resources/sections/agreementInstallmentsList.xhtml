<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:sections="http://java.sun.com/jsf/composite/sections">

<composite:interface>
	<composite:attribute name="editingDisable"></composite:attribute>
	<composite:attribute name="installmentOutcome"></composite:attribute>

</composite:interface>

<composite:implementation
	xmlns:sections="http://java.sun.com/jsf/composite/sections">

	<h:outputStylesheet name="table.css" library="css" />


	<p:dataTable id="installmentTable"  selectionMode="single" rowKey="#{installment.id}" var="installment"
		value="#{agreementManager.agreement.installments}"
		emptyMessage="#{msgs.noInstallmentFound}">
		<p:column headerText="#{msgs.date}">

			<h:outputText value="#{installment.date}">
				<f:convertDateTime locale="it" dateStyle="full" />
			</h:outputText>


		</p:column>

		<p:column headerText="#{msgs.amount}">
			<h:outputText value="#{installment.wholeAmount}" />

		</p:column>

		<p:column headerText="#{msgs.paidInvoice_Question}">
			<h:selectBooleanCheckbox value="#{installment.paidInvoice}"
				disabled="true" />


			<p:commandButton styleClass="list-row-button" icon="ui-icon-search"
				action="#{installmentWizardPB.viewInstallment()}">
				<f:setPropertyActionListener
					target="#{installmentWizardPB.returnPage}"
					value="#{cc.attrs.installmentOutcome}"></f:setPropertyActionListener>
				<f:setPropertyActionListener value="#{installment.id}"
					target="#{installmentManager.selectedInstalmentId}" />
			</p:commandButton>
			<p:commandButton styleClass="list-row-button" icon="ui-icon-wrench"
				action="#{installmentWizardPB.editInstallment()}">
				<f:setPropertyActionListener
					target="#{installmentWizardPB.returnPage}"
					value="#{cc.attrs.installmentOutcome}"></f:setPropertyActionListener>
				<f:setPropertyActionListener value="#{installment.id}"
					target="#{installmentManager.selectedInstalmentId}" />
			</p:commandButton>
			<p:commandButton styleClass="list-row-button" icon="ui-icon-trash"
				oncomplete="delete_confirm.show();">
				<f:setPropertyActionListener
					target="#{installmentWizardPB.returnPage}"
					value="#{cc.attrs.installmentOutcome}"></f:setPropertyActionListener>
				<f:setPropertyActionListener value="#{installment.id}"
					target="#{installmentManager.selectedInstalmentId()}" />
			</p:commandButton>




		</p:column>



	</p:dataTable>


	<p:confirmDialog message="#{msgs.sure}" header="#{msgs.remove}"
		severity="alert" widgetVar="delete_confirm">
		<p:commandButton value="#{msgs.yes}"
			action="#{installmentWizardPB.deleteInstallment()}" immediate="true"
			update="installmentTable" oncomplete="delete_confirm.hide();" />
		<p:commandButton value="#{msgs.no}" onclick="delete_confirm.hide();"
			type="button" />
	</p:confirmDialog>


	<h:commandButton action="#{installmentManager.addInstallment()}"
		value="Aggiungi una rata" ajax="false" immediate="true">
		<f:setPropertyActionListener
			target="#{installmentWizardPB.returnPage}"
			value="#{cc.attrs.installmentOutcome}"></f:setPropertyActionListener>
	</h:commandButton>







</composite:implementation>
</html>